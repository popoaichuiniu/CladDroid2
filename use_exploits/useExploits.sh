#!/bin/sh
../android-sdk/platform-tools/adb devices
killall guake
../android-sdk/platform-tools/adb shell screenrecord  --time-limit 15  --bit-rate 8000000 /sdcard/demo1.mp4 &
./startLogger.sh &
intentInfo=$1
apk=$2 
echo $intentInfo
echo $apk
../android-sdk/platform-tools/adb install -r ../android_project/Camera/TestPermissionleakge/app/build/outputs/apk/debug/app-debug.apk
echo "测试app安装完毕"
../android-sdk/platform-tools/adb push $intentInfo /data/data/jacy.popoaichuiniu.com.testpermissionleakge/files/intentInfo.txt
echo "测试用例推送完毕"
../android-sdk/platform-tools/adb install -r $apk
echo "待测app安装完毕"
../android-sdk/platform-tools/adb shell am start -n jacy.popoaichuiniu.com.testpermissionleakge/jacy.popoaichuiniu.com.testpermissionleakge.MainActivity
echo "开始测试待测app"
sleep 25s
../android-sdk/platform-tools/adb pull /sdcard/demo1.mp4 .